# Gestion-Inventario-Draft-JL
Caso Propuesto.  La Empresa XX necesita la creacion de un sistema de inventario que permita registrar, analizar y reportar indicadores logisticos diarios que ofrezcan a los analistas y gerentes la oportunidad de de monitorear el desempe√±o operativo y reducir el impacto economico del inventario

üì¶ Proyecto: Sistema de Gesti√≥n de Inventarios - Empresa XX
1. ‚úÖ Objetivos del Sistema
   
‚Ä¢	Automatizar el control de entradas y salidas de productos en el almac√©n.

‚Ä¢	Mantener informaci√≥n actualizada sobre niveles de stock.

‚Ä¢	Mejorar la trazabilidad y reducci√≥n de p√©rdidas por vencimiento, obsolescencia o errores.

‚Ä¢	Generar alertas por bajo inventario o vencimiento pr√≥ximo.

‚Ä¢	Facilitar reportes e indicadores clave para la toma de decisiones log√≠sticas.
________________________________________
2. üîë Entidades Clave a Proponer
   
Entidad	Descripci√≥n

Producto.	Representa los √≠tems almacenados.

ID

Nombre

Descripcion

Precio

Stock Minimo

Stock Maximo


Categor√≠a.	Clasificaci√≥n de los productos (Ej. electr√≥nicos, alimentos).

ID

Nombre


Proveedor.	Datos del proveedor del producto.


ID

Nombre

Contacto

Telefono

Localizacion


Entrada.	Registro de ingreso de productos al almac√©n.


ID

Producto ID

Ubicacion Temporal

Fecha de Registro

Fecha de Expiracion Producto 

Cantidad


Salida.	Registro de salida de productos (ventas, traspasos).

ID

Producto ID

Tipo de Salida (Ventas,Traspaso)

Ubicacion de Salida

Usuario 


Ubicaci√≥n.	Espacio f√≠sico dentro del almac√©n (estanter√≠a, zona, etc.)

ID

Almacen

Localidad

Estanteria


Usuario.	Persona que opera el sistema.

ID

Nombre

Responsabilidad/Cargo

Correo Electronico

Numero de Telefono


Inventario	Estado actual de existencias por producto.

Product ID

Cantidad Actual

Ubicacion ID

________________________________________
3. üìú Reglas del Almac√©n
   
‚Ä¢	Todo producto debe tener una categor√≠a y un proveedor asignado.

‚Ä¢	No se puede registrar una salida si no hay stock suficiente.

‚Ä¢	Se deben registrar las fechas de entrada y vencimiento si aplica.

‚Ä¢	Cada movimiento (entrada/salida) debe tener un responsable (usuario).

‚Ä¢	Se debe asignar una ubicaci√≥n f√≠sica a cada producto.

‚Ä¢	Se genera una alerta autom√°tica cuando el stock llega al nivel m√≠nimo configurado.
________________________________________
4. üìà Ejemplos de Indicadores (KPIs)
   
Indicador	F√≥rmula / Fuente de Datos

Nivel de Stock Promedio	Promedio de unidades por producto

Tasa de Rotaci√≥n de Inventario	Salidas √∑ Stock promedio

D√≠as de Inventario Disponible	Stock actual √∑ Salida diaria promedio

Porcentaje de Productos Vencidos	(Productos vencidos √∑ Total productos) √ó 100

Alertas de Bajo Inventario	N√∫mero de productos por debajo del m√≠nimo
________________________________________
5. üîç Consultas Comunes
   
‚Ä¢	¬øCu√°les productos est√°n por debajo del nivel m√≠nimo?

‚Ä¢	¬øQu√© productos vencen en los pr√≥ximos 30 d√≠as?

‚Ä¢	¬øCu√°ntas entradas/salidas hubo en el √∫ltimo mes?

‚Ä¢	¬øCu√°l es el historial de movimiento de un producto espec√≠fico?

‚Ä¢	¬øCu√°les son los productos con mayor/menor rotaci√≥n?

____________________________________________________________________________
DIAGRAMA ENTIDAD RELACION
  
[DIAGRAMA ENTIDAD RELACION  SISTEMA INVENTARIO JL.pdf](https://github.com/user-attachments/files/20376029/DIAGRAMA.ENTIDAD.RELACION.SISTEMA.INVENTARIO.JL.pdf)

![image](https://github.com/user-attachments/assets/6201a212-ef40-4bcb-90bc-a994fa86e399)

Dise√±o: Definici√≥n del Modelo L√≥gico de la Base de Datos.

![image](https://github.com/user-attachments/assets/596bf9a2-6d26-4891-ae42-3df29ef0954e)



‚Ä¢	Construcci√≥n: Desarrollo de las sentencias SQL que permiten la construcci√≥n de las tablas y dem√°s estructuras de la Base de Datos en SQL SERVER.
USE [master]
GO
/****** Object:  Database [Proyecto_Inventario_Jose_Lopez]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
CREATE DATABASE [Proyecto_Inventario_Jose_Lopez]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'Proyecto_Inventario_Jose_Lopez', FILENAME = N'C:\Users\joseo\OneDrive\Escritorio\MSSQL16.MSSQLSERVER02\MSSQL\DATA\Proyecto_Inventario_Jose_Lopez.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'Proyecto_Inventario_Jose_Lopez_log', FILENAME = N'C:\Users\joseo\OneDrive\Escritorio\MSSQL16.MSSQLSERVER02\MSSQL\DATA\Proyecto_Inventario_Jose_Lopez_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT, LEDGER = OFF
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET COMPATIBILITY_LEVEL = 160
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [Proyecto_Inventario_Jose_Lopez].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ARITHABORT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET  DISABLE_BROKER 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET RECOVERY FULL 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET  MULTI_USER 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET DB_CHAINING OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
EXEC sys.sp_db_vardecimal_storage_format N'Proyecto_Inventario_Jose_Lopez', N'ON'
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET QUERY_STORE = ON
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET QUERY_STORE (OPERATION_MODE = READ_WRITE, CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 30), DATA_FLUSH_INTERVAL_SECONDS = 900, INTERVAL_LENGTH_MINUTES = 60, MAX_STORAGE_SIZE_MB = 1000, QUERY_CAPTURE_MODE = AUTO, SIZE_BASED_CLEANUP_MODE = AUTO, MAX_PLANS_PER_QUERY = 200, WAIT_STATS_CAPTURE_MODE = ON)
GO
USE [Proyecto_Inventario_Jose_Lopez]
GO
/****** Object:  UserDefinedFunction [dbo].[INV_DESPACHO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE  FUNCTION [dbo].[INV_DESPACHO]
(

	@PRODUCTOID INt, @DATE1 DATETIME, @DATE2 DATETIME
)
RETURNS FLOAT
AS
BEGIN
	
	DECLARE @ResultVar int,@Entradas int, @despacho int, @inicial int
	set @despacho=(SELECT SUM(CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=@PRODUCTOID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2)
	RETURN @DESPACHO

END
GO
/****** Object:  UserDefinedFunction [dbo].[INV_INICIAL]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[INV_INICIAL]
(

	@PRODUCTOID INt, @DATE1 DATETIME, @DATE2 DATETIME
)
RETURNS FLOAT
AS
BEGIN
	
	DECLARE @ResultVar int,@Entradas int, @despacho int, @inicial int
	set @Entradas=(SELECT SUM(CANTIDAD) FROM ENTRADAS WHERE PRODUCTOID=@PRODUCTOID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2)
	set @despacho=(SELECT SUM(CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=@PRODUCTOID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2)
	set @inicial=(select cantidad from PRODUCTOS where ID=@PRODUCTOID)--@entradas+@despacho
	RETURN ISNULL(@INICIAL - @ENTRADAS + @DESPACHO,0)

END
GO
/****** Object:  UserDefinedFunction [dbo].[RESUMEN_DESPACHO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[RESUMEN_DESPACHO] 
(

	@PRODUCTOID int
)
RETURNS int
AS
BEGIN
	DECLARE @TOTAL INT
	SET @TOTAL=(SELECT SUM (CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=@PRODUCTOID)


	RETURN @TOTAL

END
GO
/****** Object:  UserDefinedFunction [dbo].[UNIDAD_STOCK]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[UNIDAD_STOCK]
(
@PRODUCTOID INT
	
	)
RETURNS int
AS
BEGIN
	DECLARE @TOTAL INT
	SET @TOTAL=(SELECT SUM(CANTIDAD)
  FROM [Proyecto_Inventario_Jose_Lopez].[dbo].[ENTRADAS]
  WHERE PRODUCTOID=@PRODUCTOID)

	-- Return the result of the function
	RETURN @TOTAL

END
GO
/****** Object:  Table [dbo].[ALMACEN]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ALMACEN](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre_Almacen] [nvarchar](50) NOT NULL,
	[Ubicacionid] [int] NOT NULL,
	[Localidadid] [int] NULL,
 CONSTRAINT [PK_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CATEGORIA_INVENTARIO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CATEGORIA_INVENTARIO](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_CATEGORIA_INVENTARIO] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DESPACHOS]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DESPACHOS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[PRODUCTOID] [int] NOT NULL,
	[TIPO_SALIDA] [nvarchar](50) NOT NULL,
	[UBICACIONID] [int] NOT NULL,
	[USUARIOID] [int] NOT NULL,
	[ALMACENID] [int] NOT NULL,
	[CANTIDAD] [int] NOT NULL,
	[FECHA_REGISTRO] [datetime] NULL,
 CONSTRAINT [PK_DESPACHOS] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ENTRADAS]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ENTRADAS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[PRODUCTOID] [int] NOT NULL,
	[ALMACENID] [int] NOT NULL,
	[UBICACIONID] [int] NOT NULL,
	[FECHA_REGISTRO] [datetime] NOT NULL,
	[FECHA_EXPIRACION] [datetime] NULL,
	[USUARIOID] [int] NULL,
	[CANTIDAD] [int] NULL,
 CONSTRAINT [PK_ENTRADAS] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LOCALIDAD]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LOCALIDAD](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_LOCALIDAD] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PRODUCTOS]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PRODUCTOS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre] [nvarchar](50) NOT NULL,
	[Descripcion] [nvarchar](50) NOT NULL,
	[Precio_Unitario] [decimal](18, 2) NOT NULL,
	[Costo_Promedio] [decimal](18, 2) NULL,
	[Stock_Minimo] [int] NULL,
	[Stock_Maximo] [int] NULL,
	[Punto_Reorden] [int] NULL,
	[CategoriaId] [int] NOT NULL,
	[ProveedorId] [int] NOT NULL,
	[CANTIDAD] [int] NULL,
 CONSTRAINT [PK_PRODUCTOS] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PROVEEDOR]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PROVEEDOR](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](100) NOT NULL,
	[CONTACTO] [nvarchar](100) NOT NULL,
	[RNC] [nvarchar](10) NOT NULL,
	[TELEFONO] [nvarchar](20) NOT NULL,
	[LOCALIZACION] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_PROVEEDOR] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[UBICACION]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[UBICACION](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre_Ubicacion] [nvarchar](10) NULL,
 CONSTRAINT [PK_UBICACION] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[USUARIO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[USUARIO](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](100) NOT NULL,
	[POSICION] [nvarchar](50) NOT NULL,
	[TELEFONO] [nvarchar](12) NOT NULL,
	[EMAIL] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_USUARIO] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[PRODUCTOS] ADD  CONSTRAINT [DF_PRODUCTOS_Costo_Promedio]  DEFAULT ((0)) FOR [Costo_Promedio]
GO
ALTER TABLE [dbo].[ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_ALMACEN_LOCALIDAD] FOREIGN KEY([Localidadid])
REFERENCES [dbo].[LOCALIDAD] ([ID])
GO
ALTER TABLE [dbo].[ALMACEN] CHECK CONSTRAINT [FK_ALMACEN_LOCALIDAD]
GO
ALTER TABLE [dbo].[ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_ALMACEN_UBICACION] FOREIGN KEY([Ubicacionid])
REFERENCES [dbo].[UBICACION] ([ID])
GO
ALTER TABLE [dbo].[ALMACEN] CHECK CONSTRAINT [FK_ALMACEN_UBICACION]
GO
ALTER TABLE [dbo].[DESPACHOS]  WITH CHECK ADD  CONSTRAINT [FK_DESPACHOS_ALMACEN] FOREIGN KEY([ALMACENID])
REFERENCES [dbo].[ALMACEN] ([ID])
GO
ALTER TABLE [dbo].[DESPACHOS] CHECK CONSTRAINT [FK_DESPACHOS_ALMACEN]
GO
ALTER TABLE [dbo].[DESPACHOS]  WITH CHECK ADD  CONSTRAINT [FK_DESPACHOS_PRODUCTOS] FOREIGN KEY([PRODUCTOID])
REFERENCES [dbo].[PRODUCTOS] ([ID])
GO
ALTER TABLE [dbo].[DESPACHOS] CHECK CONSTRAINT [FK_DESPACHOS_PRODUCTOS]
GO
ALTER TABLE [dbo].[DESPACHOS]  WITH CHECK ADD  CONSTRAINT [FK_DESPACHOS_USUARIO] FOREIGN KEY([USUARIOID])
REFERENCES [dbo].[USUARIO] ([ID])
GO
ALTER TABLE [dbo].[DESPACHOS] CHECK CONSTRAINT [FK_DESPACHOS_USUARIO]
GO
ALTER TABLE [dbo].[ENTRADAS]  WITH CHECK ADD  CONSTRAINT [FK_ENTRADAS_ALMACEN] FOREIGN KEY([ALMACENID])
REFERENCES [dbo].[ALMACEN] ([ID])
GO
ALTER TABLE [dbo].[ENTRADAS] CHECK CONSTRAINT [FK_ENTRADAS_ALMACEN]
GO
ALTER TABLE [dbo].[ENTRADAS]  WITH CHECK ADD  CONSTRAINT [FK_ENTRADAS_PRODUCTOS] FOREIGN KEY([PRODUCTOID])
REFERENCES [dbo].[PRODUCTOS] ([ID])
GO
ALTER TABLE [dbo].[ENTRADAS] CHECK CONSTRAINT [FK_ENTRADAS_PRODUCTOS]
GO
ALTER TABLE [dbo].[ENTRADAS]  WITH CHECK ADD  CONSTRAINT [FK_ENTRADAS_UBICACION] FOREIGN KEY([UBICACIONID])
REFERENCES [dbo].[UBICACION] ([ID])
GO
ALTER TABLE [dbo].[ENTRADAS] CHECK CONSTRAINT [FK_ENTRADAS_UBICACION]
GO
ALTER TABLE [dbo].[PRODUCTOS]  WITH CHECK ADD  CONSTRAINT [FK_PRODUCTOS_CATEGORIA_INVENTARIO] FOREIGN KEY([CategoriaId])
REFERENCES [dbo].[CATEGORIA_INVENTARIO] ([ID])
GO
ALTER TABLE [dbo].[PRODUCTOS] CHECK CONSTRAINT [FK_PRODUCTOS_CATEGORIA_INVENTARIO]
GO
ALTER TABLE [dbo].[PRODUCTOS]  WITH CHECK ADD  CONSTRAINT [FK_PRODUCTOS_PROVEEDOR] FOREIGN KEY([ProveedorId])
REFERENCES [dbo].[PROVEEDOR] ([ID])
GO
ALTER TABLE [dbo].[PRODUCTOS] CHECK CONSTRAINT [FK_PRODUCTOS_PROVEEDOR]
GO
USE [master]
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET  READ_WRITE 
GO

MODELO FISICO
![image](https://github.com/user-attachments/assets/fa511251-2963-4ddc-af2f-45a956d47c94)


Script de la Base de datos con inserci√≥n de datos (M√≠nimo 5 registros por tablas independientes o no transaccionales y m√≠nimo 15 registros por cada tabla transaccional  y para trabajos grupales el doble de registros. )  

USE [master]
GO
/****** Object:  Database [Proyecto_Inventario_Jose_Lopez]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
CREATE DATABASE [Proyecto_Inventario_Jose_Lopez]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'Proyecto_Inventario_Jose_Lopez', FILENAME = N'C:\Users\joseo\OneDrive\Escritorio\MSSQL16.MSSQLSERVER02\MSSQL\DATA\Proyecto_Inventario_Jose_Lopez.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'Proyecto_Inventario_Jose_Lopez_log', FILENAME = N'C:\Users\joseo\OneDrive\Escritorio\MSSQL16.MSSQLSERVER02\MSSQL\DATA\Proyecto_Inventario_Jose_Lopez_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
 WITH CATALOG_COLLATION = DATABASE_DEFAULT, LEDGER = OFF
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET COMPATIBILITY_LEVEL = 160
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [Proyecto_Inventario_Jose_Lopez].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ARITHABORT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET  DISABLE_BROKER 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET RECOVERY FULL 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET  MULTI_USER 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET DB_CHAINING OFF 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
EXEC sys.sp_db_vardecimal_storage_format N'Proyecto_Inventario_Jose_Lopez', N'ON'
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET QUERY_STORE = ON
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET QUERY_STORE (OPERATION_MODE = READ_WRITE, CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 30), DATA_FLUSH_INTERVAL_SECONDS = 900, INTERVAL_LENGTH_MINUTES = 60, MAX_STORAGE_SIZE_MB = 1000, QUERY_CAPTURE_MODE = AUTO, SIZE_BASED_CLEANUP_MODE = AUTO, MAX_PLANS_PER_QUERY = 200, WAIT_STATS_CAPTURE_MODE = ON)
GO
USE [Proyecto_Inventario_Jose_Lopez]
GO
/****** Object:  UserDefinedFunction [dbo].[INV_DESPACHO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE  FUNCTION [dbo].[INV_DESPACHO]
(

	@PRODUCTOID INt, @DATE1 DATETIME, @DATE2 DATETIME
)
RETURNS FLOAT
AS
BEGIN
	
	DECLARE @ResultVar int,@Entradas int, @despacho int, @inicial int
	set @despacho=(SELECT SUM(CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=@PRODUCTOID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2)
	RETURN @DESPACHO

END
GO
/****** Object:  UserDefinedFunction [dbo].[INV_INICIAL]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[INV_INICIAL]
(

	@PRODUCTOID INt, @DATE1 DATETIME, @DATE2 DATETIME
)
RETURNS FLOAT
AS
BEGIN
	
	DECLARE @ResultVar int,@Entradas int, @despacho int, @inicial int
	set @Entradas=(SELECT SUM(CANTIDAD) FROM ENTRADAS WHERE PRODUCTOID=@PRODUCTOID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2)
	set @despacho=(SELECT SUM(CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=@PRODUCTOID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2)
	set @inicial=(select cantidad from PRODUCTOS where ID=@PRODUCTOID)--@entradas+@despacho
	RETURN ISNULL(@INICIAL - @ENTRADAS + @DESPACHO,0)

END
GO
/****** Object:  UserDefinedFunction [dbo].[RESUMEN_DESPACHO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[RESUMEN_DESPACHO] 
(

	@PRODUCTOID int
)
RETURNS int
AS
BEGIN
	DECLARE @TOTAL INT
	SET @TOTAL=(SELECT SUM (CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=@PRODUCTOID)


	RETURN @TOTAL

END
GO
/****** Object:  UserDefinedFunction [dbo].[UNIDAD_STOCK]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[UNIDAD_STOCK]
(
@PRODUCTOID INT
	
	)
RETURNS int
AS
BEGIN
	DECLARE @TOTAL INT
	SET @TOTAL=(SELECT SUM(CANTIDAD)
  FROM [Proyecto_Inventario_Jose_Lopez].[dbo].[ENTRADAS]
  WHERE PRODUCTOID=@PRODUCTOID)

	-- Return the result of the function
	RETURN @TOTAL

END
GO
/****** Object:  Table [dbo].[ALMACEN]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ALMACEN](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre_Almacen] [nvarchar](50) NOT NULL,
	[Ubicacionid] [int] NOT NULL,
	[Localidadid] [int] NULL,
 CONSTRAINT [PK_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CATEGORIA_INVENTARIO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CATEGORIA_INVENTARIO](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_CATEGORIA_INVENTARIO] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DESPACHOS]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DESPACHOS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[PRODUCTOID] [int] NOT NULL,
	[TIPO_SALIDA] [nvarchar](50) NOT NULL,
	[UBICACIONID] [int] NOT NULL,
	[USUARIOID] [int] NOT NULL,
	[ALMACENID] [int] NOT NULL,
	[CANTIDAD] [int] NOT NULL,
	[FECHA_REGISTRO] [datetime] NULL,
 CONSTRAINT [PK_DESPACHOS] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[ENTRADAS]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ENTRADAS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[PRODUCTOID] [int] NOT NULL,
	[ALMACENID] [int] NOT NULL,
	[UBICACIONID] [int] NOT NULL,
	[FECHA_REGISTRO] [datetime] NOT NULL,
	[FECHA_EXPIRACION] [datetime] NULL,
	[USUARIOID] [int] NULL,
	[CANTIDAD] [int] NULL,
 CONSTRAINT [PK_ENTRADAS] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[LOCALIDAD]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[LOCALIDAD](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_LOCALIDAD] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PRODUCTOS]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PRODUCTOS](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre] [nvarchar](50) NOT NULL,
	[Descripcion] [nvarchar](50) NOT NULL,
	[Precio_Unitario] [decimal](18, 2) NOT NULL,
	[Costo_Promedio] [decimal](18, 2) NULL,
	[Stock_Minimo] [int] NULL,
	[Stock_Maximo] [int] NULL,
	[Punto_Reorden] [int] NULL,
	[CategoriaId] [int] NOT NULL,
	[ProveedorId] [int] NOT NULL,
	[CANTIDAD] [int] NULL,
 CONSTRAINT [PK_PRODUCTOS] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PROVEEDOR]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PROVEEDOR](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](100) NOT NULL,
	[CONTACTO] [nvarchar](100) NOT NULL,
	[RNC] [nvarchar](10) NOT NULL,
	[TELEFONO] [nvarchar](20) NOT NULL,
	[LOCALIZACION] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_PROVEEDOR] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[UBICACION]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[UBICACION](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Nombre_Ubicacion] [nvarchar](10) NULL,
 CONSTRAINT [PK_UBICACION] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[USUARIO]    Script Date: 7/6/2025 7:47:10 p.¬†m. ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[USUARIO](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[NOMBRE] [nvarchar](100) NOT NULL,
	[POSICION] [nvarchar](50) NOT NULL,
	[TELEFONO] [nvarchar](12) NOT NULL,
	[EMAIL] [nvarchar](100) NOT NULL,
 CONSTRAINT [PK_USUARIO] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[PRODUCTOS] ADD  CONSTRAINT [DF_PRODUCTOS_Costo_Promedio]  DEFAULT ((0)) FOR [Costo_Promedio]
GO
ALTER TABLE [dbo].[ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_ALMACEN_LOCALIDAD] FOREIGN KEY([Localidadid])
REFERENCES [dbo].[LOCALIDAD] ([ID])
GO
ALTER TABLE [dbo].[ALMACEN] CHECK CONSTRAINT [FK_ALMACEN_LOCALIDAD]
GO
ALTER TABLE [dbo].[ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_ALMACEN_UBICACION] FOREIGN KEY([Ubicacionid])
REFERENCES [dbo].[UBICACION] ([ID])
GO
ALTER TABLE [dbo].[ALMACEN] CHECK CONSTRAINT [FK_ALMACEN_UBICACION]
GO
ALTER TABLE [dbo].[DESPACHOS]  WITH CHECK ADD  CONSTRAINT [FK_DESPACHOS_ALMACEN] FOREIGN KEY([ALMACENID])
REFERENCES [dbo].[ALMACEN] ([ID])
GO
ALTER TABLE [dbo].[DESPACHOS] CHECK CONSTRAINT [FK_DESPACHOS_ALMACEN]
GO
ALTER TABLE [dbo].[DESPACHOS]  WITH CHECK ADD  CONSTRAINT [FK_DESPACHOS_PRODUCTOS] FOREIGN KEY([PRODUCTOID])
REFERENCES [dbo].[PRODUCTOS] ([ID])
GO
ALTER TABLE [dbo].[DESPACHOS] CHECK CONSTRAINT [FK_DESPACHOS_PRODUCTOS]
GO
ALTER TABLE [dbo].[DESPACHOS]  WITH CHECK ADD  CONSTRAINT [FK_DESPACHOS_USUARIO] FOREIGN KEY([USUARIOID])
REFERENCES [dbo].[USUARIO] ([ID])
GO
ALTER TABLE [dbo].[DESPACHOS] CHECK CONSTRAINT [FK_DESPACHOS_USUARIO]
GO
ALTER TABLE [dbo].[ENTRADAS]  WITH CHECK ADD  CONSTRAINT [FK_ENTRADAS_ALMACEN] FOREIGN KEY([ALMACENID])
REFERENCES [dbo].[ALMACEN] ([ID])
GO
ALTER TABLE [dbo].[ENTRADAS] CHECK CONSTRAINT [FK_ENTRADAS_ALMACEN]
GO
ALTER TABLE [dbo].[ENTRADAS]  WITH CHECK ADD  CONSTRAINT [FK_ENTRADAS_PRODUCTOS] FOREIGN KEY([PRODUCTOID])
REFERENCES [dbo].[PRODUCTOS] ([ID])
GO
ALTER TABLE [dbo].[ENTRADAS] CHECK CONSTRAINT [FK_ENTRADAS_PRODUCTOS]
GO
ALTER TABLE [dbo].[ENTRADAS]  WITH CHECK ADD  CONSTRAINT [FK_ENTRADAS_UBICACION] FOREIGN KEY([UBICACIONID])
REFERENCES [dbo].[UBICACION] ([ID])
GO
ALTER TABLE [dbo].[ENTRADAS] CHECK CONSTRAINT [FK_ENTRADAS_UBICACION]
GO
ALTER TABLE [dbo].[PRODUCTOS]  WITH CHECK ADD  CONSTRAINT [FK_PRODUCTOS_CATEGORIA_INVENTARIO] FOREIGN KEY([CategoriaId])
REFERENCES [dbo].[CATEGORIA_INVENTARIO] ([ID])
GO
ALTER TABLE [dbo].[PRODUCTOS] CHECK CONSTRAINT [FK_PRODUCTOS_CATEGORIA_INVENTARIO]
GO
ALTER TABLE [dbo].[PRODUCTOS]  WITH CHECK ADD  CONSTRAINT [FK_PRODUCTOS_PROVEEDOR] FOREIGN KEY([ProveedorId])
REFERENCES [dbo].[PROVEEDOR] ([ID])
GO
ALTER TABLE [dbo].[PRODUCTOS] CHECK CONSTRAINT [FK_PRODUCTOS_PROVEEDOR]
GO
USE [master]
GO
ALTER DATABASE [Proyecto_Inventario_Jose_Lopez] SET  READ_WRITE 
GO

ANEXOS.  
Evidencias de consultas
--¬øCu√°les productos est√°n por debajo del nivel m√≠nimo?

select * from PRODUCTOS
WHERE CANTIDAD<Stock_Minimo

--‚Ä¢	Consultar por categor√≠a de productos.

select A.id,A.Nombre,cantidad,b.nombre AS CATEGORIA from PRODUCTOS A
INNER JOIN CATEGORIA_INVENTARIO B
ON A.CategoriaId=B.ID

--‚Ä¢	¬øCu√°ntas entradas/salidas hubo en el √∫ltimo mes?
--ENTRADAS/DESPACHOS

DECLARE @DATE1 DATETIME='2025-06-01', @DATE2 DATETIME='2025-06-30'
SELECT ID, Nombre,
(SELECT SUM(CANTIDAD) FROM ENTRADAS WHERE PRODUCTOID=A.ID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2) AS ENTRADAS,
(SELECT SUM(CANTIDAD) FROM DESPACHOS WHERE PRODUCTOID=A.ID AND FECHA_REGISTRO BETWEEN @DATE1 AND @DATE2) AS DESPACHOS
FROM PRODUCTOS A 

--‚Ä¢	¬øCu√°l es el historial de movimiento de un producto espec√≠fico?

DECLARE @PRODUCTOID INT =4 --PARA SELECCIONAR EL PRODUCTO
SELECT A.ID,NOMBRE,B.FECHA_REGISTRO,'ENTRADA' AS TIPO,B.CANTIDAD,B.USUARIOID 
INTO #TEMPO1
FROM PRODUCTOS A
INNER JOIN ENTRADAS B
ON A.ID=B.PRODUCTOID 
WHERE A.ID=@PRODUCTOID

UNION ALL 
SELECT A.ID,NOMBRE,B.FECHA_REGISTRO,'DESPACHO' AS TIPO,B.CANTIDAD,B.USUARIOID 
FROM PRODUCTOS A
INNER JOIN DESPACHOS B
ON A.ID=B.PRODUCTOID 
WHERE A.ID=@PRODUCTOID
SELECT * FROM #TEMPO1 ORDER BY FECHA_REGISTRO DESC
DROP TABLE #TEMPO1

--¬øCu√°les son los productos con mayor/menor rotaci√≥n?

SELECT ID, Nombre,DBO.INV_INICIAL (ID,'2025-06-01','2025-06-30') as INVENTARIO_INICIAL, Cantidad as Inventario_Final, 
DBO.INV_DESPACHO (ID,'2025-06-01','2025-06-30') AS DESPACHO,
((DBO.INV_INICIAL (ID,'2025-06-01','2025-06-30')+CANTIDAD)/2) AS PROMEDIO,
CAST (DBO.INV_DESPACHO (ID,'2025-06-01','2025-06-30') /((DBO.INV_INICIAL (ID,'2025-06-01','2025-06-30')+CANTIDAD)/2) AS float) AS ROTACION
FROM PRODUCTOS A





